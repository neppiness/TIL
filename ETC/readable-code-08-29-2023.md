# **읽기 쉬운 코드가 좋은 코드다(The Art of Readable Code)**

## Part 0 Introduction
### 1 코드는 이해하기 쉬워야 한다
* 무엇이 코드를 '더 좋게' 만드는가?
  - 아래 코드를 좋은 코드로 소개하고 있다.
```cpp
for (Node* node = list->head; node != NULL; node = node->next)
    print(node->data);
```
* 가독성의 기본 정리
  - 코드는 다른 사람이 그 코드를 이해하는 데 걸리는 시간을 최소화하는 방법으로 작성해야 한다.
  - 여기서 이해의 기준은 높다.
    + 그 사람이 작성된 코드를 자유롭게 수정하고, 버그를 짚어낼 수 있어야 한다.
    + 작성된 내용의 동작 원리를 알 수 있어야 한다.
* 분량이 적으면 항상 더 좋은가?
  - 일반적으론 그러하다
  - 그러나 내용을 너무 압축해놓으면 이를 분석하는 데 걸리는 시간이 더 들 수 있다.
* 이해를 위한 시간은 다른 목표와 충돌하는가?
  - 이해하는 코드를 작성하더라도 코드의 효율성, 아키텍처, 또는 테스트 용이성과 같은 부분과 충돌하는 일이 거의 없었다고 함.
* 이해하기 좋은 코드를 작성할 때 발생하는 어려움
  - 누군가가 읽었을 때 이를 이해하기 쉬울지 판단하는 게 어렵다.
* 정리: 좋은 코드는 이해하기 좋은 코드며, 이는 대체로 짧은 코드다. 이해하기 좋은 코드는 나쁠 게 없다.

<br>

## Part 1 표면적 수준에서의 개선
* 표면적 수준에 해당하는 개선 행위
  - 좋은 이름을 짓기
  - 좋은 설명 달기
  - 코드를 보기 좋게 하기

### 2 이름에 정보 담기
* 특정한 단어 고르기
  - get은 별 의미가 없다.
  - size는 너무 다양하게 쓰일 수 있다.
  - stop은 재개 가능 여부를 나타내질 못한다.
* 보편적인 이름 피하기
  - tmp, retval 등은 '임시 값', '반환 값'이라는 의미만 포함한다.
  - 더 좋은 이름을 사용하면 함수 내에서 어떤 데이터가 이 값들에 영향을 끼치는지 나타낼 수 있다.
  - tmp는 짧게 잠깐 거쳐가는 경우에만 사용하는 게 좋다. 그 경우엔 tmp라는 뜻에 완벽히 부합하는 변수기 때문이다.
  - for 문의 인덱스의 경우 누구에 대응되는 인덱스인지 명시하는 편이 좋다. 본인도 헷갈려서 잘못 입력하는 경우가 발생하기 때문이다.
* 추상적인 이름 대신 구체적 이름 사용하기
  - `--run_locally`라는 플래그를 통해서 추가 로깅을 수행했다고 한다.
  - 이 경우, 팀에 늦게 합류한 사람은 이 플래그가 어떤 역할을 하는지 짐작할 수조차 없다.
* 접두사 혹은 접미사로 이름에 추가 정보 덧붙이기
  - 16진수 변수에 hex라는 접두사를 붙인다. 예: hex_id
  - 단위가 필요한 경우 변수명에 단위를 명시한다. 예: start_ms
  - 이름에 추가적인 정보를 써서 더 명확히 한다. 예: data_urlenc, html_utf8
* 이름 길이 제한
  - 좁은 범위에서는 짧은 이름도 괜찮다.
  - 긴 이름 입력하기: 이제 입력이 어렵지 않으니 변수명은 길어도 큰 상관 없다.
  - 약어와 축약형: 약어는 해석이 어렵다. 보편적으로 많이 쓰이는 약어는 상관 없다(HTML, str, docs)
  - 불필요한 단어 제거: convertToString이나 toString으로 바꿔도 의미를 잃어버리지 않는다.
* 추가 정보를 담을 수 있게 이름 구성
  - `kMaxOpenFiles`와 같이 상수앞에 k를 붙이자는 약속을 하는 등의 것.
    + 이게 헝가리언 표기법 같은 느낌인데, 여전히 좋은 생각인지는 잘 모르겠음.
    + 그렇지만 C++에서 매크로를 SCREAMING_SNAKE_CASE로 쓰기 때문에 어쩔 수 없는 부분일지도.
  - 클래스 필드의 이름은 언더스코어를 마지막에 붙여 쓴다.(예: int no_of_days_)
* 정리: 의미 있는 단어들을 적절한 접두사/접미사로 부연하고, 컨벤션에 따라 포맷팅하며, 축약하지 않고 쓴다.

<br>

### 3 오해할 수 없는 이름들
* "내가 지은 이름을 본 사람이 다른 의미로 해석할 수 있지 않을까?"라는 질문을 던져보자
* Filter()
  - 이 조건에 부합하는 걸 고르는 건지, 아니면 부합하지 않는 걸 거르는 건지 알 수가 없음.
  - 문제는 이 이름을 고차함수에 쓰고 있다는 것. 이 경우, 부합하는 것들을 고른다.
* Clip()
  - 내용을 어떤 조건으로 오려낸다는 건지 알 수가 없다.
* 경계를 포함하는 한계값을 다룰 때는 min, max를 사용하라
  - max와 min은 각각 해당 값 초과, 미만인 경우에 에러를 발생시켜야 하도록 설계한다.
  - 위와 같이 설정 시 조건문을 `if (shopping_cart.num_items > MAX_ITEMS_IN_CART)`와 같이 쓸 수 있다.
* 경계에 포함되는 범위는 first와 last를 써라.
* 경계의 포함/배제하는 범위명은 begin, end를 써라.
  - C++ iterator들이 이같이 표현됨.
  - 이를 따르면 내가 이분탐색을 구현하는 방식에선 두 인덱스 명이 fisrt, last여야 함.
* 불리언 변수 이름 붙이기
  - 어떤 상태를 의미하는지 명확한 이름을 쓰자.
  - 부정의 의미를 포함하지 않는 게 좋다. 그 변수가 false면 이중 부정을 고려해야 하기 때문이다.
* 사용자의 기대에 부응하기
  - getMean()이라고 했는데 단순하게 mean 변수값을 가져오는 게 아니라 계산이 이루어진다면 문제가 된다.
  - 위 경우, calculateMean이나 computeMean과 같은 함수명을 활용하자.
* 변수명에 대한 후보군을 두고 적절성을 평가해보자.
* 정리: 개발자들의 통상적 관념에 맞게 이름을 짓자. 

<br>

### 4 미학
* 개요
  - 미학적이란 말은 시각적으로 보기 편하다는 의미다. 이를 위해서:
  - 코드를 읽는 사람이 이미 친숙한, 일관된 레이아웃을 사용하라.
  - 비슷한 코드는 서로 비슷해 보이게 만들어라.
  - 서로 연관된 코드는 하나의 블록으로 묶어라.
* 심미성 vs. 설계
  - 둘은 양립 가능하다고 주장함.
* 주석을 굉장히 지저분하게 작성하면 코드를 읽기가 힘들어진다. 예시에서 딱 그 사실을 인지시킴.
* 일관성과 간결성을 위해 줄바꿈을 재정렬하기
  - 동일한 코드가 동일하게 보이지 않으면 우리는 그것이 어떤 차이 때문인지 더 들여다보게 된다.
  - 따라서, 동일한 코드는 동일하게 보이도록 하는 게 좋다.
* 메소드를 활용하여 불규칙성을 정리하라
  - 공통 로직을 밖으로 빼면서 발생하는 이점임.
  - 이런 형태로 수정을 진행해야 하는 건지 생각해보자.
* 필요하다면 열을 정렬하라.
  - 아래와 같은 오타를 바로 잡아낼 수 있다.

```java
// POST 파라미터를 지역변수에 저장한다.
details  = request.POST.get('details');
location = request.POST.get('location');
phone    = equest.POST.get('phone');
email    = request.POST.get('email');
url      = request.POST.get('url');
```

* 나열이 필요할 때는 정렬 기준을 수립하고 이를 따르라.
  - 중요도가 있는 경우엔 중요한 것부터 덜 중요한 순으로 정렬하라.
  - 가중치가 없는 경우엔 알파벳 순서로 정렬하라.
* 선언문은 역할에 따라 블록으로 구분하자.
  - 이 경우 주석을 쓰게 된다.
  - 그렇다 하더라도, 어떤 메소드의 집합인지, 어떤 필드의 집합인지 명확히 나타내주면 좋은 듯하다.
* 코드를 '문단'으로 쪼개라.
  - 우리가 단순한 글을 쓸 때도 문단을 구분하는 건 그 문단 단위에 있는 주제를 구분하기 위해서다.
  - 또한, 이를 통해 시각적으로 단계를 구분지을 수 있다.
  - 그러므로, 코드 역시 의미에 따라 문단을 구분해주면 좋다.
* K&R 방식과 GNU 방식은 중괄호 스타일이 다르다.
  - 이 둘에는 가독성 우열 관계가 없지만, 이 둘을 섞어 쓰면 문제가 발생한다.
  - 이 경우 프로젝트 내에서 공유하는 방식으로 중괄호를 사용해주자.
* 정리: 시각적으로 코드를 보기 좋게 하는 위 테크닉들을 잘 활용하자.

<br>

### 5 주석에 담아야 하는 대상
### 6 명확하고 간결한 주석 달기

## Part 2 루프와 논리 단순화하기
### 7 읽기 쉽게 흐름제어 만들기
### 8 거대한 표현을 잘게 쪼개기
### 9 변수와 가독성

## Part 3 코드 재작성하기
### 10 상관없는 하위문제 추출하기
### 11 한 번에 하나씩
### 12 생각을 코드로 만들기
### 13 코드 분량 줄이기

## Part 4 선택된 주제들
### 14 테스트와 가독성
### 15 '분/시간 카운터'를 설계하고 구현하기
