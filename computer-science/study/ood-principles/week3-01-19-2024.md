 **Grokking the Low Level Design Interview Using OOD Principles**

# Designing a Meeting Scheduler
## Getting Ready: The Meeting Scheduler Problem
### 문제 정의
#### 면접자에게 바라는 것
* 회의실 예약
* 참석자 참석 가능 여부

#### 설계 접근
* 바텀-업

#### 설계 패턴
* 싱글톤 패턴

<br>

## Requirements for the Meeting Scheduler
### 요구사항 집합
* n개의 회의실을 둠.
* 각 회의실은 최대 수용인원이 정해져 있음.
* 회의실이 이미 예약된 상태가 아니라면 예약될 수 있어야 함.
* 회의실에 초청받은 모든 사람이 알림을 받아야 함.
* 달력을 통해 일시를 확인하고 스케쥴에 접근할 수 있어야 함.

<br>

## Use Case Diagram for the Meeting Scheduler
### 시스템
* 회의 스케쥴러

### 액터
* 1차 엑터: 스케쥴러, 사용자
* 2차 엑터: 시스템

### 사용사례
* 스케쥴러: 회의 일정 세팅/취소
* 사용자: 회의실 예약/예약취소
* 시스템: 초대 알림/취소 알림

<br>

## Class Diagram for the Meeting Scheduler
### 회의 스케쥴러 구성요소
* 사용자, 회의 인터벌, 회의실, 회의, 달력, 회의 스케쥴러, 알림을 클래스로 구성

### 디자인 패턴
* 회의 스케쥴러는 하나만 있어야 함.
    - 이를 위해 싱글톤 패턴을 적용함.

<br>

## Sequence Diagram for the Meeting Scheduler
### 회의 잡기
* 액터: 예약자
* 객체들: 스케쥴러, 달력, 회의실, 회의

<br>

## Activity Diagram for the Meeting Scheduler
### 회의 잡기
* 작업의 절차를 시퀀스 다이어그램으로 그림.

<br>

# Designing a Movie Ticket Booking System
## Getting Ready: Movie Ticket Booking System
* 영화 티켓 예약 시스템

### 면접자에게 기대하는 바
* 좌석 선택, 결제 처리, 가격 변동, 중복 처리 등에 대해서 묻고 싶은 것.

### 설계 패턴
* 전략 패턴 활용.
    - 어떤 부분에 적용되는지 확인할 것.

<br>

## Requirements for the Movie Ticket Booking System
### 요구사항들
* 영화관이 도시에 여러 개 있다고 가정.
    - 영화관은 여러 상영관을 가진다고 가정.
* 영화관의 각 영화는 여러 번 상영된다.
* 영화관은 모든 영화의 상영시간을 보여준다.
* 위와 같은 시스템적으로 구현하고자 하는 기능들을 기록함.

<br>

## Use Case Diagram for the Movie Ticket Booking System
### 구성요소
* 시스템: 영화 티켓 예약 시스템
* 액터
    - 1차 액터: 고객, 티케팅 직원
    - 2차 액터: 관리자, 시스템

### 사용 사례
* 관리자
    - 상영관 및 영화 관련 CRUD
* 고객
    - 영화 검색
    - 예약에 대한 CRUD
    - 좌석 예약
    - 결제
* ticket agent
    - 영화 검색
    - 예매 및 예매 확인
    - 좌석 예약
* 시스템
    - 새 영화 알림
    - 예약 알림
    - 취소 알림

### 관계
* 사용 사례들 간의 관계를 서술

<br>

## Class Diagram for the Movie Ticket Booking System
### 구성요소
* 구성요소들을 두고, 클래스 간의 관계를 서술
* 영화 티켓 예약 시스템의 클래스 다이어그램을 도시.

### 동시성 처리
* 두 명 이상의 고객이 같은 상영일정의 좌석을 예약할 수 없도록 함.
    - 뮤텍스 락을 통해서 처리함.
    - 리소스에 대해 한 번에 한 요청만 처리하도록 락을 거는 것.

### 설계 패턴
* 가격을 산정하는 정책을 전략 패턴으로 구현.
    - 이를 외부에서 주입하는 식으로 풀고자 하는 것으로 이해됨.

### 추가 요구조건
* 할인
* 고객과 게스트의 구분.
    - 계정을 추상 클래스로 두고, 관리자, 고객, ticket agent가 이를 구현하도록 함.
    - 공통 기능은 Account 추상 클래스에 명시되어 있으며, 나머지 각각의 고유 기능은 구현 클래스에서 설정.

<br>

## Sequence Diagram for the Movie Ticket Booking System
* 세 가지 상호작용에 대해서 시퀀스 다이어그램을 그리고자 함.
    - 예약 / 예약에 대한 비용 지불 / 예약 취소

<br>

## Activity Diagram for the Movie Ticket Booking System
### 고객이 영화에 대한 예약을 시도
* 그 과정을 액티비티 다이어그램으로 한 흐름 상에 나타냄.

<br>

# Designing a Car Rental System
## Getting Ready: The Car Rental System
### 면접자에게 바라는 것.
* 차종, 인터페이스 검색, 서비스, 예약 취소, 결제 금액의 유연성

### 설계 패턴
* 데코레이터 패턴

<br>

## Requirements for the Car Rental System
### 요구조건들
* R1: 차량 대여 시스템에는 고객과 접수원이 있음.
* R2: 여러 유형의 탈것들을 다뤄야 함.
* R3: 세부 타입을 둬 경제적, 럭셔리, 기본, 그리고 컴팩트 등으로 차량을 구분.
* 등등 시스템 구현을 위한 구체적인 요구조건들을 제시함.

<br>

## Use Case Diagram for the Car Rental System
### 구성요소
* 시스템: 렌터카
* 액터
    - 1차 액터: 회원
    - 2차 액터: 접수원, 직원, 시스템

### 사용 사례
#### 멤버
* 계정 생성, 계정 업데이트, 로그인/로그아웃, 차량 인벤토리 검색
* 예약, 예약 취소, 예약 갱신
* 차량 수령 / 반납, 요금 결제

#### 접수원
* 계정 관련 기능
* 예약 관련 기능
* 차량 추가/삭제/수정
* 로그 업데이트

#### 시스템
* 연체 안내, 예약 및 예약 취소 안내

#### 사용사례 간 관계
* 예약 생성 시 보험을 추가하거나, 부운전자, 서비스 추가 등을 수행할 수 있음.
    - 이는 예약 생성 기능에서 확장된 것.
* 차량 반납은 요금 지불로 이어짐
    - 차량 반납은 요금 지불을 포함함.

<br>

## Class Diagram for the Car Rental System
### 렌터카 시스템 구성 요소
* 구현해야 하는 시스템 구성 요소들을 언급

### 설계 패턴
* 할인 데코레이터: 모든 차량들에 대해 할인을 적용할 수 있음.
* 성수기 데코레이터: 성수기에 모든 차량 요금을 인상할 수 있음.
* 차량 손상에 대한 추가 요금 데코레이터: 차량 상태가 손상된 경우 추가 요금을 요구할 수 있음.
* 기름양 데코레이터: 반납 시 주유 상태에 따라 추가 요금을 청구할 수 있음.

<br>

## Sequence Diagram for the Car Rental System
### 차량 예약
* 액터: 회원
* 대상: 카탈로그, 예약, 결제
* 시스템

* 카탈로그를 통해 차량 목록에 접근
* 차량 목록에서 차량을 선택하고 예약을 수행.

<br>

## Activity Diagram for the Car Rental System
### 차량 선택
* 차량 ID를 확인하고 멤버 ID를 확인
    - 예약이 유효한지 판단
        + 유효한 경우, 차량 상태를 대여중, 예약 완료됨이라 표시
        + 유효하지 않은 경우 에러를 반환.

<br>

# Designing ATM
## Getting Ready: The ATM System
### 면접자에게 기대하는 것
#### ATM 구성요소
* 어떤 요소들이 있는지
* ATM이 방안에 있어야 하는지
* ATM이 지문 인식기가 있는지

#### ATM 기능들
* 출금 한도가 얼마인지
* 계좌 잔고를 ATM에서 확인할 수 있는지
* PIN을 세팅할 것인지

### 설계 패턴
* 싱글톤, 상태 설계 패턴을 활용할 것

<br>

## Requirements for the ATM System
### 요구사항들
* 카드 리더, 키패드, 화면, 현금인출기, 프린터, 네트워크 인프라
    - 위 요소들을 각각 구성해야함.

<br>

## Use Case Diagram for the ATM System
### ATM의 이해당사자들
* 시스템: ATM
* 액터
    - 1차 액터: 카드 소지자
    - 2차 액터: 카드 조회자, 시스템, 시스템 관리자

### 사용 사례
#### 카드 소지자
* 카드 삽입, 거래, pin 변경, 거래 취소

#### 카드 조회자
* 카드 소지자의 신분 확인
* 계좌 잔고 및 한도 확인
* 계정 활성화/비활성화

#### 시스템
* 카드 소지자의 신분 확인
* ATM 내 잔고 확인
* ATM 출금 한도
* 카드 반환
* 현금 인출
* 명세표 출력

#### 오퍼레이터
* 시스템 시작/종료
* 프린터 영수증 리필
* 인출기 현금 충전

### 관계
* 거래는 많은 것을 일반화함
    - 잔고 확인, 송금, 인출 등
* 현금 인출을 위해 그에 따라 확인해야 하는 사용 사례가 많음
    - ATM 출금 한도 확인, ATM의 현금 잔고 확인 등

<br>

## Class Diagram for the ATM System
### Components of the ATM system
* 특별히 확인할 것은 ATM 상태를 추상 클래스를 둔 뒤 하위 클래스를 작성하는 것으로 접근함.
* ATM 상태로 다양한 상태가 존재하며, 해당 상태에 할 수 있는 일들을 기록함.
    - 이런 방식이 상태 설계법인 듯.
    - 객체지향 프로그램에서 활용하려는 의미와는 다소 거리가 있는 듯하지만, GoF에 이런 내용이 있을지도.

### 설계 패턴
* 싱글톤 설계 패턴: ATM을 단일 객체로 활용
* 컴포짓 설계 패턴: ATM 기능에 따라 서로 다른 구성요소들을 통해 전체 시스템을 설계하는 합성 설계도 가능함.
* 빌더 패턴을 활용해 복잡한 객체를 만들 때도 동일한 프로세스로 진행하게 함.
    - 어떤 말인지 감이 잘 안 옴.

## 추가 요구사항
* 책임의 사슬(chain of responsibility) 형식으로 여러가지 확인할 책임들을 연결지음.

<br>

## Sequence Diagram for the ATM System
* 계좌 잔고 조회
    - ATM에 카드를 넣고 PIN을 입력하는 등, 하나씩 절차를 밟으며 진행함.

<br>

## Activity Diagram for the ATM System
### 카드 소지자가 ATM 거래를 수행하는 경우
* 어떤 일들을 순차적으로 처리해야 하는지 시퀀스 다이어그램으로 그림

<br>

# Designing a Chess Game
## Getting Ready: The Chess Game
* 체스 보드게임을 구현

### 면접자에게 바라는 것
* 체스말
    - 몇 개의 말이 존재하는지
    - 어떤 말들이 있으며, 그들이 어떻게 움직이는지
    - 어떤 말이 가장 약하고 가장 강한지
* 게임플레이
    - 누가 먼저 시작하는지
    - 룰이 어떻게 되는지
    - 체크메이트가 뭔지
    - 어떻게 교착상태가 일어나는지
    - 플레이어가 기권할 수 있는지

### 설계 패턴
* 싱글톤 디자인
* 명령 패턴

<br>

## Requirements for the Chess Game
### 요구사항들
* 기본적인 체스 룰을 따르는 요구사항들을 기록함.

<br>

## Use Case Diagram for the Chess Game
### 이해관계자
* 시스템: 체스 게임
* 액터
    - 1차 액터: 플레이어
    - 2차 액터: 관리자

### 사용 사례
* 플레이어와 관리자가 할 수 있는 일들을 서술
* 플레이어와 관리자는 별개
    - 각각이 할 수 있는 일이 다름.
    - 말을 움직이는 일은 각각 다른 종류의 말을 움직이는 일의 일반화
    - 말을 움직이려면 해당 움직임이 유효한지 확인해야 함.
    - 이후 결과를 선언할 수도, 안 할 수도 있음(캐슬링, 체크메이트 등)

<br>

## Class Diagram for the Chess Game
### 체스의 구성요소
* 박스, 체스보드, 말들, 움직임, 계정(플레이어, 관리자 포함), 체스 움직임 컨트롤러, 체스 게임 뷰, 체스 게임

### 연관관계
* Move 클래스는 플레이어와 단방향 연관관계를 가진다.
    - 그러나, Move가 어떻게 플레이어와 연관되는지 잘 감이 안 옴.
    - Move에는 플레이어 정보가 들어있음.
        + 그러니 Move는 플레이어를 사용함
        + Move -- <<use>> --> Player
### 설계 패턴
* 싱글톤 설계 패턴
    - 체스 보드 객체가 하나만 존재하도록 함.
* 명령 설계 패턴
    - 각 체스 말들에게 움직이라는 명령 하나만 주면 각각이 구현한 움직임대로 진행.
* 이터레이터 패턴, 상태 설계 패턴, 관찰자 설계 패턴도 적용될 수 있음.

<br>

## Activity Diagram for the Chess Game
### 체스게임
* 체스 게임 전반이 어떻게 흘러가는지를 액티비티 다이어그램으로 도시.

<br>

# Designing a Hotel Management System
## Getting Ready: The Hotel Management System
### 면접자에게 바라는 것
* 방 예약
* 결제 처리
* 금액 변동
* 예약 취소

### 설계 패턴
* 전략 패턴, 싱글톤 패턴, 팩토리 패턴을 적용하고자 함.

<br>

## Requirements for the Hotel Management System
### 요구사항들
* 호텔 관리 시스템의 요구사항을 작성함.
    - 방의 등급을 나누고, 예약 가능한 곳이 있는지 확인할 수 있는 등 기능을 제공

<br>

## Use Case Diagram for the Hotel Management System
### 이해관계자
* 시스템: 호텔
* 액터
    - 1차 액터: 손님, 접수원, 관리자, 하우스키퍼
    - 2차 액터: 시스템, 서버

### 사용하는 경우
* 손님
    - 계정 서비스에 대한 기본적인 것들
    - 결제
    - 예약 관련 기능들
* 접수원
    - 방을 관리하는 기능들
    - 예약을 취소하거나 출력해주는 기능
    - 계정을 확인, 새 계정을 등록
    - 손님의 입실/퇴실 처리
* 매니저
    - 관리 관련 기능들이 추가됨.
* 시스템
    - 방에 대한 비용을 추가하거나 갱신
    - 예약 알림 발송

### 관계
* 접수원이 할 수 있는 모든 일은 매니저가 할 수 있음.
    - 매니저와 접수원은 일반화 관계에 있음.
    - "매니저는 접수원에 대해 일반화 관계를 갖는다."
* 이후 기능들이 서로 관련되는 것에 대해 작성

<br>

## Class Diagram for the Hotel Management System
### 호텔 관리 시스템 구성요소
* 주소, 계정, 사람, 서비스, 송장, 예약, 알림, 방, 방 열쇠, 룸 관리, 요금 정산, 호텔, 호텔 지점

### 클래스 간 관계
* 방 예약 시에는 손님 정보와 접수원 정보가 들어가니 단방향 연관관계가 있음.
* 방에는 방 예약 정보가 들어가야하므로, 이 둘은 단방향 연관관계가 있음.

### 설계 패턴
* 호텔은 싱글톤으로 작성
* 전략 패턴을 통해 요금을 계산
* 호텔 관리 시스템에는 여러 방이 필요하기 때문에, 이를 팩토리 디자인 패턴 형태로 작성.

<br>

## Sequence Diagram for the Hotel Management System
### 방 예약
* 방 예약 과정을 상세히 서술하고 다이어그램으로 도시

<br>

## Activity Diagram for the Hotel Management System
### 호텔 체크인에 대한 액티비티 다이어그램
* 어떤 활동들이 일어나는지 도시.

<br>

# Designing Stack Overflow
## Getting Ready: Stack Overflow
### 면접자에게 바라는 것
* 탐색성
    - 어떻게 질문을 검색할 수 있는가
    - 태그나 사용자를 통해 질문을 필터링할 수 있는가
* 평판
    - 평판 점수는 어떻게 계산되는가
    - moderator access를 얻기 위해 얼마나 많은 포인트를 얻어야 하는가?
* 투표
    - 얼마나 많은 투표 방식을 허용할지, upvote와 downvote는?
    - 질문이 닫히면 투표 결과는 어떻게 할 것인가

### 디자인 패턴
* 관찰자 패턴

<br>

## Requirements for Stack Overflow
### 요구사항들
* 질문 검색: 태그, 사용자이름
* 새 질문을 올리거나 대답을 올릴 수 있어야 한다.
* 추천, 비추천, 답글 달기 등의 기능을 수행할 수 있다.
* 등등 스택 오버플로우 기능들을 서술함.

<br>

## Use Case Diagram for Stack Overflow
### 이해관계자
* 시스템: 스택 오버플로우
* 액터
    - 1차 액터: 사용자
    - 2차 액터: 게스트, 관리자, 사회자(moderator), 시스템

### 사용 사례
* 사용자
    - 로그인, 로그아웃, 패스워드 초기화
    - 질문에 대한 추가/수정/플래그 달기
    - 답에 대한 추가, 수정, 플래그 달기
    - 댓글 남기기

* 몇 가지 특별한 사용 사례
    - 댓글을 남기거나 투표하는 건 알림을 보내는 것으로 이어짐
        + 이에 따라 upvote/downvote -- <<include>> --> Send notification이라 둘 수 있음.
    - 질문 수정에 따라 여러 기능을 할 수도, 안 할 수도 있음.
        + Modify question <-- <<extend>> --- Modify bounty/tag 등
    - 사회자는 사용자의 특수한 케이스
        + 즉, 사회자는 사용자와 일반화 관계를 가짐.

<br>

## Class Diagram for Stack Overflow
### 스택 오버플로우 구성요소
* 계정, 게스트, 질문, 답, 댓글, 현상금, 뱃지, 태그, 태그리스트, 알림, 검색 인터페이스

### 클래스 간 관계
* 사용자는 질문, 댓글, 뱃지, 질문 등을 사용함
    - 단방향 연관관계를 가짐.
* SerachCatalog는 Search 인터페이스를 구현함.

### 설계 패턴
* 알림 기능 측면에서 질문이나 답변은 이에 대한 구독자로 설정됨.

<br>

## Sequence Diagram for Stack Overflow
### 질문을 닫는 경우에 대한 시퀀스 다이어그램
* 사회자가 처리하는 경우, 평판이 3000인 질문의 경우 어떻게 처리하는지 분기를 시퀀스 다이어그램으로 도시

<br>

## Activity Diagram for Stack Overflow
### 회원이 질문을 작성하는 경우
* 서술한 절차대로 회원의 질문 생성 과정을 처리함.
