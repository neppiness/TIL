# **Combuild Project Design**

## 목표
### 서버 구현
* 컴퓨터 부품을 등록하고 구매하는 등의 일을 처리할 수 있는 서버 구현
* 좀 더 진지하게 접근하면 CSV로 파일을 만들고, 이를 파싱하는 로직을 만들어서 자동으로 DB에 넣어주는 게 좋을 것 같음
  - 간단히, CPU를 선택했다면 관련된 메인보드만 띄워준다든지
  - 이는 DB에서 자동적으로 쿼리를 처리해줘야 함.

### DB 활용
* 재고에 대한 동시성 처리
  - 어떤 패턴으로 재고에 대한 동시성을 구매하려는 고객들에게 알려줄 수 있는가?

<br>

## 구상 
* 클라이언트는 웹 브라우저. URL에 대한 설계만 수행하면 됨.
* 자바-스프링 기반으로 작성할 예정.
* 한 웹브라우저에서 JS로 돌리면서 계속 구매 요청을 하는 식이면 어떨까?
  - 재고는 5000개인데 한 25만 요청을 수행하는 것.
  - 이럴 때 동시성은 어떻게 처리될 것인가.

<br>

## 요구사항
### 스프링 프로젝트 초기화
### URL 설계
### DB 연동
### 제품 등록
### 필터링 구현
### 가상 구매 로직 구현
### 동시성 처리

<br>

## 설계
### URL 설계
* 도메인: https://com.build
* 견적: ./estimate
  - 견적 진행 중에 어떻게 설정할 것인지 고민
  - CPU가 선택된 상태라면?
  - MB가 선택된 상태라면?
  - 비트마스킹한 값을 넘기면 참 쉬울 것 같기도 하고
  - 지금 선택할 솔루션은 아래와 같은 방식으로 할 예정
    + https://com.build/estimate?cpu={id1}&mb={id2}&ram={id3}
    + 이에 대해서 사용자가 임의 처리를 시도하는 경우, 클라이언트 에러를 발생시키고 견적 초기페이지로 보내고자 함.
    + 그런데 이러한 에러처리는 서버 차원에서 할 수가 없음. id 범위를 구분해야할 것 같음
* 쇼핑: ./shopping
  - 견적과 다르게 파트별 연동 등을 전혀 상관하지 않는 방식으로 구현
  - 일반적인 쇼핑이나 다름 없게 구현한다고 생각.
  - 주 목적은 아니고, 이런 식으로 구현할 수도 있다하고만 구분할 예정.
* 튜토리얼: ./tutorial
  - 더 진행된 이후에 해야할 것.
  - 각 파츠에서 중요하게 봐야할 것들.
  - 호환성 체크할 때 중요한 것들.

### 추천 로직 작성 방향
* 전체 로직 작성 방향은 아래와 같음.
  1. CPU / GPU
    + 게이머들이 가장 접근하기 쉬운 방식이기도 함.
    + GPU를 선택 안 하는 경우 CPU에 iGPU가 있는 모델을 강제할 수도 있음.
    + CPU 쿨러는 선택적으로. 단, 미들타워를 못 쓰게 되는 경우 이에 대한 명시.
    + 또한, 안정적인 CPU 온도도 제시해야 함.
  2. MB
    + CPU가 선택되면 소켓에 의해 MB가 제한됨.
    + 또한, CPU의 전력량에 따라서 그에 부합하는 전원부 선택을 권장. 무시할 수도 있음.
    + 대신 이로 인해서 케이스가 영향 받음을 명시
  3. RAM
    + MB의 슬롯 인터페이스에 의해서 개수, 그리고 DDR 세대가 결정됨.
  4. 보조기억장치
    + SSD, HDD
    + MB의 NVMe 지원 여부, 그리고 버스 용량에 따라서 활용 가능한 인터페이스와 최대 개수가 결정됨.
  5. Case
    + CPU 쿨러, GPU 길이, MB 폼팩터, 보조기억장치 개수에 따라 추천 모델 조정
    + 선택 불가한 케이스는 그 사유를 명확히 표시해서 재선택을 유도
  6. PSU
    + 모든 파트가 결정된 후 전원 소요량이 계산되면 마진을 두고 PSU 선택
* 결국 이 모든 파트를 끼워서 본체 하나를 만들어야 함.
  - PCPart라는 인터페이스를 두고, 각 부품들의 속성을 클래스로 정의
  - 해당 클래스의 인스턴스인지 확인하는 것으로 각 파트 세팅 가능.
* 검색을 수행할 때는 각 파트별로 구분해서 쿼리함.
  - 이러기 위해선 DB를 어떤 식으로 둬야 하는지에 대해서도 공부해야 할 듯
  - 당연히 검색에서는 파트를 구분하는 것이 N을 줄이기 때문에 데이터 입출력에 훨씬 효율적임.

### DB 연동
* 필요한 데이터를 쿼리를 통해서 가져오도록 구현
  - 어떤 설계가 효율적일지 생각해보자.
  - 그냥 단순하게 모든 데이터를 짤막짤막하게 가져와서
* DB 연결은 하나고, 테이블을 여러 개 두는 쪽으로 구현할 것.
